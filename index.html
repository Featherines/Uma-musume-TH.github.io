<html lang="en" class="  webp webp-alpha webp-animation webp-lossless"><head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-133296718-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-133296718-1');
    </script>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <link rel="icon" href="../../images/webpage/icon.png">

    
    

    
    
    
    
    

    
    
    
    
    
    
    
    
    

    
    
    
    
    
    

    <!-- SCRIPTS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/treant-js/1.0/Treant.min.js"></script>
    <script src="../../vendor/modernizr/modernizr-custom.js"></script> <!-- WEBP CHECK -->
    <script src="../../scripts/priconne-data.js"></script>

    <!-- CSS STYLE SHEETS -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/treant-js/1.0/Treant.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="../../css/spritesheet.css">
    <link rel="stylesheet" href="../../css/data.css">
</head>
<body>
<noscript>
    <style type="text/css">
        div {display: none;}
        hr {display: none;}
        footer {display: none;}
    </style>
    <h1 style="color: white; font-family: 'Trebuchet MS', Arial, serif; text-align:center; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); text-shadow: 1px 1px 2px #000000;">
        <span style="color: orangered;">JavaScript is disabled!</span>
        <br><br>
        <span style="color: deepskyblue;">priconne-quest-helper/recipe-data/</span> cannot function without JavaScript.
        <br><br>
        <span style="color: #ffdf73;">Please enable JavaScript to continue!</span>
    </h1>
</noscript>



<div>
    <h1 class="title main_title">Uma Musume Pretty Derby - Skill search</h1>
    <h2 class="title sub_title">Beta test</h2>
    <h1 class="title simple_title">Uma Musume Pretty Derby - Skill search</h1>
</div>

<hr>
<div id="catalog"><div class="common"><i class="item-sprite is__iron-blade" title="Iron Blade"></i><i class="item-sprite is__killer-pencil" title="Killer Pencil"></i><i class="item-sprite is__wood-grip" title="Wood Grip"></i><i class="item-sprite is__hunters-bow" title="Hunter's Bow"></i><i class="item-sprite is__steel-spear" title="Steel Spear"></i><i class="item-sprite is__one-handed-axe" title="One Handed Axe"></i><i class="item-sprite is__fragrant-wood-wand" title="Fragrant Wood Wand"></i><i class="item-sprite is__leather-overalls" title="Leather Overalls"></i><i class="item-sprite is__journey-robe" title="Journey Robe"></i><i class="item-sprite is__tree-shield" title="Tree Shield"></i><i class="item-sprite is__leather-boots" title="Leather Boots"></i><i class="item-sprite is__fashionable-beret" title="Fashionable Beret"></i><i class="item-sprite is__motivational-bracelet" title="Motivational Bracelet"></i><i class="item-sprite is__protective-pendant" title="Protective Pendant"></i><i class="item-sprite is__fighting-bracelet" title="Fighting Bracelet"></i></div><div class="copper"><i class="item-sprite is__gear-blade" title="Gear Blade"></i><i class="item-sprite is__blue-blood" title="Blue Blood"></i><i class="item-sprite is__aurora-sword" title="Aurora Sword"></i><i class="item-sprite is__crescent-sword" title="Crescent Sword"></i><i class="item-sprite is__command-knife" title="Command Knife"></i><i class="item-sprite is__leather-knuckle" title="Leather Knuckle"></i><i class="item-sprite is__crystal-bow" title="Crystal Bow"></i><i class="item-sprite is__trident" title="Trident"></i><i class="item-sprite is__flame-spear" title="Flame Spear"></i><i class="item-sprite is__metal-axe" title="Metal Axe"></i><i class="item-sprite is__high-metal-axe" title="High-Metal Axe"></i><i class="item-sprite is__green-rod" title="Green Rod"></i><i class="item-sprite is__little-dragon-rod" title="Little Dragon Rod"></i><i class="item-sprite is__doctorless-staff" title="Doctorless Staff"></i><i class="item-sprite is__compassion-of-the-unicorn" title="Compassion of the Unicorn"></i><i class="item-sprite is__clothes-of-wisdom" title="Clothes of Wisdom"></i><i class="item-sprite is__light-plate" title="Light Plate"></i><i class="item-sprite is__scale-mail" title="Scale Mail"></i><i class="item-sprite is__high-metal-plate" title="High Metal Plate"></i><i class="item-sprite is__folklore-clothes" title="Folklore Clothes"></i><i class="item-sprite is__shinobi-costume" title="Shinobi Costume"></i><i class="item-sprite is__spring-color-robe" title="Spring Color Robe"></i><i class="item-sprite is__nordic-robe" title="Nordic Robe"></i><i class="item-sprite is__tower-shield" title="Tower Shield"></i><i class="item-sprite is__crown-boots" title="Crown Boots"></i><i class="item-sprite is__hunting-boots" title="Hunting Boots"></i><i class="item-sprite is__witch-boots" title="Witch Boots"></i><i class="item-sprite is__cute-caskets" title="Cute Caskets"></i><i class="item-sprite is__legion-helm" title="Legion Helm"></i><i class="item-sprite is__nuns-hood" title="Nun's Hood"></i><i class="item-sprite is__jewel-of-courage" title="Jewel of Courage"></i><i class="item-sprite is__spike-bangle" title="Spike Bangle"></i><i class="item-sprite is__jewel-of-love" title="Jewel of Love"></i><i class="item-sprite is__victory-friendship-bracelet" title="Victory Friendship Bracelet"></i><i class="item-sprite is__magic-glasses" title="Magic Glasses"></i><i class="item-sprite is__jewel-of-wisdom" title="Jewel of Wisdom"></i><i class="item-sprite is__magic-monocle" title="Magic Monocle"></i><i class="item-sprite is__pattern-bracelet" title="Pattern Bracelet"></i></div><div class="silver"><i class="item-sprite is__sparkling-sword" title="Sparkling Sword"></i><i class="item-sprite is__ryuumon-sword" title="Ryuumon Sword"></i><i class="item-sprite is__feather-blade" title="Feather Blade"></i><i class="item-sprite is__moonlight-sword" title="Moonlight Sword"></i><i class="item-sprite is__thunder-god-sword" title="Thunder God Sword"></i><i class="item-sprite is__platinum-knife" title="Platinum Knife"></i><i class="item-sprite is__vampire-dagger" title="Vampire Dagger"></i><i class="item-sprite is__dragons-claw" title="Dragon's Claw"></i><i class="item-sprite is__cupids-bow" title="Cupid's Bow"></i><i class="item-sprite is__devils-bow" title="Devil's Bow"></i><i class="item-sprite is__knights-pride" title="Knight's Pride"></i><i class="item-sprite is__absolute-spear" title="Absolute Spear"></i><i class="item-sprite is__blue-sphere-axe" title="Blue Sphere Axe"></i><i class="item-sprite is__lions-battle-axe" title="Lion's Battle Axe"></i><i class="item-sprite is__lightning-axe" title="Lightning Axe"></i><i class="item-sprite is__thorn-blood-rod" title="Thorn Blood Rod"></i><i class="item-sprite is__devils-horn" title="Devil's Horn"></i><i class="item-sprite is__celestial-sphere-watcher" title="Celestial Sphere Watcher"></i><i class="item-sprite is__flower-bud-wand" title="Flower Bud Wand"></i><i class="item-sprite is__fashion-armor" title="Fashion Armor"></i><i class="item-sprite is__battling-dress" title="Battling Dress"></i><i class="item-sprite is__heavy-metal-armor" title="Heavy Metal Armor"></i><i class="item-sprite is__gorgeous-armor" title="Gorgeous Armor"></i><i class="item-sprite is__millefeuille-cloth" title="Millefeuille Cloth"></i><i class="item-sprite is__palace-cloth" title="Palace Cloth"></i><i class="item-sprite is__cosmos-cloth" title="Cosmos Cloth"></i><i class="item-sprite is__cupid-robe" title="Cupid Robe"></i><i class="item-sprite is__philosophers-robe" title="Philosopher's Robe"></i><i class="item-sprite is__garnet-shield" title="Garnet Shield"></i><i class="item-sprite is__shinobi-shoes" title="Shinobi Shoes"></i><i class="item-sprite is__fencer-boots" title="Fencer Boots"></i><i class="item-sprite is__witch-palace-boots" title="Witch Palace Boots"></i><i class="item-sprite is__dragon-head" title="Dragon Head"></i><i class="item-sprite is__witch-headband" title="Witch Headband"></i><i class="item-sprite is__witch-hat" title="Witch Hat"></i><i class="item-sprite is__opal-earrings" title="Opal Earrings"></i><i class="item-sprite is__lion-eagles-feather" title="Lion Eagle's Feather"></i><i class="item-sprite is__scarlet-diamond" title="Scarlet Diamond"></i><i class="item-sprite is__emerald-earrings" title="Emerald Earrings"></i><i class="item-sprite is__octogram-pendant" title="Octogram Pendant"></i><i class="item-sprite is__lion-kings-protective-charm" title="Lion King's Protective Charm"></i><i class="item-sprite is__turquoise-earrings" title="Turquoise Earrings"></i><i class="item-sprite is__pearl-earrings" title="Pearl Earrings"></i><i class="item-sprite is__sorcerers-glasses" title="Sorcerer's Glasses"></i><i class="item-sprite is__laurels-sorrow" title="Laurel's Sorrow"></i></div><div class="gold"><i class="item-sprite is__angel-blade" title="Angel Blade"></i><i class="item-sprite is__solar-sword" title="Solar Sword"></i><i class="item-sprite is__ice-claymore" title="Ice Claymore"></i><i class="item-sprite is__chaos-blade" title="Chaos Blade"></i><i class="item-sprite is__butterfly-katana" title="Butterfly Katana"></i><i class="item-sprite is__bright-sword" title="Bright Sword"></i><i class="item-sprite is__hawk-gods-sword" title="Hawk God's Sword"></i><i class="item-sprite is__phoenix-sword" title="Phoenix Sword"></i><i class="item-sprite is__precious-knife" title="Precious Knife"></i><i class="item-sprite is__princess-dagger" title="Princess' Dagger"></i><i class="item-sprite is__dark-matter-edge" title="Dark Matter Edge"></i><i class="item-sprite is__unicorn-knife" title="Unicorn Knife"></i><i class="item-sprite is__blazing-gauntlet" title="Blazing Gauntlet"></i><i class="item-sprite is__lion-king-gauntlet" title="Lion King Gauntlet"></i><i class="item-sprite is__blizzard-claw" title="Blizzard Claw"></i><i class="item-sprite is__lightning-fist" title="Lightning Fist"></i><i class="item-sprite is__lightning-bow" title="Lightning Bow"></i><i class="item-sprite is__angel-bow" title="Angel Bow"></i><i class="item-sprite is__artemis-bow" title="Artemis Bow"></i><i class="item-sprite is__spirit-tree-bow" title="Spirit Tree Bow"></i><i class="item-sprite is__scarlet-dragon" title="Scarlet Dragon"></i><i class="item-sprite is__queen-bee-spear" title="Queen Bee Spear"></i><i class="item-sprite is__storm-bringer" title="Storm Bringer"></i><i class="item-sprite is__gaia-bardiche" title="Gaia Bardiche"></i><i class="item-sprite is__shiryuu-axe" title="Shiryuu Axe"></i><i class="item-sprite is__hell-fire-axe" title="Hell-Fire Axe"></i><i class="item-sprite is__queens-battle-axe" title="Queen's Battle Axe"></i><i class="item-sprite is__aqua-slasher" title="Aqua Slasher"></i><i class="item-sprite is__fury-rod" title="Fury Rod"></i><i class="item-sprite is__rod-of-sun" title="Rod of Sun"></i><i class="item-sprite is__justice-gods-staff" title="Justice God's Staff"></i><i class="item-sprite is__high-devil-wand" title="High Devil Wand"></i><i class="item-sprite is__moon-wand" title="Moon Wand"></i><i class="item-sprite is__rod-of-life" title="Rod of Life"></i><i class="item-sprite is__phoenix-rod" title="Phoenix Rod"></i><i class="item-sprite is__high-angel-rod" title="High Angel Rod"></i><i class="item-sprite is__invisible-dress" title="Invisible Dress"></i><i class="item-sprite is__mythril-plate" title="Mythril Plate"></i><i class="item-sprite is__crusader-plate" title="Crusader Plate"></i><i class="item-sprite is__scarlet-mail" title="Scarlet Mail"></i><i class="item-sprite is__angel-armor" title="Angel Armor"></i><i class="item-sprite is__vermilion-plate" title="Vermilion Plate"></i><i class="item-sprite is__violet-armor" title="Violet Armor"></i><i class="item-sprite is__dragonic-armor" title="Dragonic Armor"></i><i class="item-sprite is__moonlight-garment" title="Moonlight Garment"></i><i class="item-sprite is__hermit-clothes" title="Hermit Clothes"></i><i class="item-sprite is__heavenly-robe" title="Heavenly Robe"></i><i class="item-sprite is__dark-terror-dress" title="Dark Terror Dress"></i><i class="item-sprite is__grand-magicians-robe" title="Grand Magician's Robe"></i><i class="item-sprite is__saints-robe" title="Saint's Robe"></i><i class="item-sprite is__viridian-spiritual-dress" title="Viridian Spiritual Dress"></i><i class="item-sprite is__empress-shield" title="Empress Shield"></i><i class="item-sprite is__guardian-shield" title="Guardian Shield"></i><i class="item-sprite is__paladin-greave" title="Paladin Greave"></i><i class="item-sprite is__angel-boots" title="Angel Boots"></i><i class="item-sprite is__faireal-boots" title="Faireal Boots"></i><i class="item-sprite is__wizard-boots" title="Wizard Boots"></i><i class="item-sprite is__necromancer-boots" title="Necromancer Boots"></i><i class="item-sprite is__aquarius-boots" title="Aquarius Boots"></i><i class="item-sprite is__feather-waltz" title="Feather Waltz"></i><i class="item-sprite is__wizard-hood" title="Wizard Hood"></i><i class="item-sprite is__popes-hood" title="Pope's Hood"></i><i class="item-sprite is__gospel-tiara" title="Gospel Tiara"></i><i class="item-sprite is__elemental-heart" title="Elemental Heart"></i><i class="item-sprite is__sun-amulet" title="Sun Amulet"></i><i class="item-sprite is__firelords-ring" title="Firelord's Ring"></i><i class="item-sprite is__cat-god-pendant" title="Cat God Pendant"></i><i class="item-sprite is__bangle-of-substitution" title="Bangle of Substitution"></i><i class="item-sprite is__moon-bracelet" title="Moon Bracelet"></i><i class="item-sprite is__congregation-pendant" title="Congregation Pendant"></i><i class="item-sprite is__mourning-crescent-moon" title="Mourning Crescent Moon"></i><i class="item-sprite is__dragons-tear" title="Dragon's Tear"></i><i class="item-sprite is__great-sage-gem" title="Great Sage Gem"></i></div><div class="purple"><i class="item-sprite is__lightning-blade" title="Lightning Blade"></i><i class="item-sprite is__dawns-holy-sword" title="Dawn's Holy Sword"></i><i class="item-sprite is__great-sword-of-sin" title="Great Sword of Sin"></i><i class="item-sprite is__konominato-sword-aqua-ruler" title="Konominato Sword - Aqua Ruler"></i><i class="item-sprite is__overlord-light-dragon-sword" title="Overlord Light Dragon Sword"></i><i class="item-sprite is__star-nuclear-sword-ertz-schneide" title="Star Nuclear Sword - Ertz Schneide"></i><i class="item-sprite is__rabbit-gods-great-sword" title="Rabbit God's Great Sword"></i><i class="item-sprite is__hundred-white-blossom-petals-sword" title="Hundred White Blossom Petals Sword"></i><i class="item-sprite is__flowing-azure-blade" title="Flowing Azure Blade"></i><i class="item-sprite is__blood-raven-sword" title="Blood Raven Sword"></i><i class="item-sprite is__ifrit-katana-ignite" title="Ifrit Katana - Ignite"></i><i class="item-sprite is__emerald-wind-gods-tachi" title="Emerald Wind God's Tachi"></i><i class="item-sprite is__branch-blade-of-divine-descent" title="Branch Blade of Divine Descent"></i><i class="item-sprite is__prosperous-carp-gods-katana" title="Prosperous Carp God's Katana"></i><i class="item-sprite is__emerald-dagger" title="Emerald Dagger"></i><i class="item-sprite is__lava-edge" title="Lava Edge"></i><i class="item-sprite is__t-r-na-n-g-dagger" title="Tír na nÓg Dagger"></i><i class="item-sprite is__twin-god-sword-of-lightning" title="Twin God Sword of Lightning"></i><i class="item-sprite is__heavenly-black-sword-of-obsidian" title="Heavenly Black Sword of Obsidian"></i><i class="item-sprite is__gehenna-dragon" title="Gehenna Dragon"></i><i class="item-sprite is__dark-blade-heavenly-ravens-guard" title="Dark Blade - Heavenly Raven's Guard"></i><i class="item-sprite is__moon-cestus" title="Moon Cestus"></i><i class="item-sprite is__crimson-claw" title="Crimson Claw"></i><i class="item-sprite is__cocytus-nail" title="Cocytus Nail"></i><i class="item-sprite is__storm-god-tempest-gear" title="Storm God Tempest Gear"></i><i class="item-sprite is__extremely-dark-nail-bloody-howl" title="Extremely Dark Nail - Bloody Howl"></i><i class="item-sprite is__star-nuclear-fist-elzloa" title="Star Nuclear Fist - Elzloa"></i><i class="item-sprite is__heaven-traveling-hook-sharp-bite" title="Heaven Traveling Hook - Sharp Bite"></i><i class="item-sprite is__silver-wing-bow" title="Silver Wing Bow"></i><i class="item-sprite is__abyss-bow" title="Abyss Bow"></i><i class="item-sprite is__heavenly-red-bow" title="Heavenly Red Bow"></i><i class="item-sprite is__armored-bow-deus-fall" title="Armored Bow - Deus Fall"></i><i class="item-sprite is__ice-bow-freezing-tear" title="Ice Bow - Freezing Tear"></i><i class="item-sprite is__star-nuclear-bow-erzvogen" title="Star Nuclear Bow - Erzvogen"></i><i class="item-sprite is__heaven-penetrating-falcons-bow" title="Heaven Penetrating Falcon's Bow"></i><i class="item-sprite is__zero-frost-lance" title="Zero Frost Lance"></i><i class="item-sprite is__gale-stinger" title="Gale Stinger"></i><i class="item-sprite is__heavens-protective-holy-spear" title="Heaven's Protective Holy Spear"></i><i class="item-sprite is__divine-spear-doom-pain" title="Divine Spear - Doom Pain"></i><i class="item-sprite is__fire-spear-prominence" title="Fire Spear - Prominence"></i><i class="item-sprite is__star-nuclear-spear-ertz-borg" title="Star Nuclear Spear - Ertz Borg"></i><i class="item-sprite is__saintly-deer-spear-alma-benard" title="Saintly Deer Spear - Alma Benard"></i><i class="item-sprite is__necrodim-axe" title="Necrodim Axe"></i><i class="item-sprite is__divine-judgement-axe" title="Divine Judgement Axe"></i><i class="item-sprite is__gaia-axe" title="Gaia Axe"></i><i class="item-sprite is__god-roar-axe-terra-break" title="God Roar Axe - Terra Break"></i><i class="item-sprite is__machine-axe-core-breaker" title="Machine Axe - Core Breaker"></i><i class="item-sprite is__turquoise-noah" title="Turquoise Noah"></i><i class="item-sprite is__red-bear-emperors-claw-battle-axe" title="Red Bear Emperor's Claw Battle Axe"></i><i class="item-sprite is__xenosphere-rod" title="Xenosphere Rod"></i><i class="item-sprite is__genesis-rod" title="Genesis Rod"></i><i class="item-sprite is__lightning-wand" title="Lightning Wand"></i><i class="item-sprite is__black-snake-dragons-staff" title="Black Snake Dragon's Staff"></i><i class="item-sprite is__abyss-moon-staff-sacrifice" title="Abyss Moon Staff - Sacrifice"></i><i class="item-sprite is__green-butterfly-wand" title="Green Butterfly Wand"></i><i class="item-sprite is__black-snakes-fiendish-flame-staff" title="Black Snake's Fiendish Flame Staff"></i><i class="item-sprite is__flame-rod" title="Flame Rod"></i><i class="item-sprite is__divine-blossom-rod" title="Divine Blossom Rod"></i><i class="item-sprite is__atlantis-rod" title="Atlantis Rod"></i><i class="item-sprite is__heaven-rod-stellar-sphere" title="Heaven Rod - Stellar Sphere"></i><i class="item-sprite is__world-trees-branch-wand" title="World Tree's Branch Wand"></i><i class="item-sprite is__phoenix-staff-rise-flare" title="Phoenix Staff - Rise Flare"></i><i class="item-sprite is__white-snakes-holy-water-rod" title="White Snake's Holy Water Rod"></i><i class="item-sprite is__phantasm-mail" title="Phantasm Mail"></i><i class="item-sprite is__nine-heavens-armor" title="Nine Heavens' Armor"></i><i class="item-sprite is__rage-queen-dress" title="Rage Queen Dress"></i><i class="item-sprite is__senka-dance-armor" title="Senka Dance Armor"></i><i class="item-sprite is__beautiful-clothes-soul-rose" title="Beautiful Clothes - Soul Rose"></i><i class="item-sprite is__southern-heaven-blazing-blue-armor" title="Southern Heaven Blazing Blue Armor"></i><i class="item-sprite is__holy-lights-lily-plate" title="Holy Light's Lily Plate"></i><i class="item-sprite is__azure-armor" title="Azure Armor"></i><i class="item-sprite is__holy-sakuras-armor" title="Holy Sakura's Armor"></i><i class="item-sprite is__gold-kings-armor" title="Gold King's Armor"></i><i class="item-sprite is__furious-wind-armor" title="Furious Wind Armor"></i><i class="item-sprite is__glowing-silver-mirror-armor" title="Glowing Silver Mirror Armor"></i><i class="item-sprite is__northern-heaven-supreme-flame-armor" title="Northern Heaven Supreme Flame Armor"></i><i class="item-sprite is__overlord-thorn-armor" title="Overlord Thorn Armor"></i><i class="item-sprite is__aegis-coat" title="Aegis Coat"></i><i class="item-sprite is__maiden-cloth" title="Maiden Cloth"></i><i class="item-sprite is__fire-onis-tori" title="Fire Oni's Tori"></i><i class="item-sprite is__extremely-dark-clothes" title="Extremely Dark Clothes"></i><i class="item-sprite is__flowing-blue-dress-azul-rondo" title="Flowing Blue Dress - Azul Rondo"></i><i class="item-sprite is__eastern-heaven-green-wind-dress" title="Eastern Heaven Green Wind Dress"></i><i class="item-sprite is__white-haze-flower-dress" title="White Haze Flower Dress"></i><i class="item-sprite is__shrine-maidens-purity-cloth" title="Shrine Maiden's Purity Cloth"></i><i class="item-sprite is__empress-robe" title="Empress Robe"></i><i class="item-sprite is__exomagia-robe" title="Exomagia Robe"></i><i class="item-sprite is__refreshing-ice-garment" title="Refreshing Ice Garment"></i><i class="item-sprite is__astrologers-holy-spirit-robe" title="Astrologer's Holy Spirit Robe"></i><i class="item-sprite is__western-heaven-saintly-guide-robe" title="Western Heaven Saintly Guide Robe"></i><i class="item-sprite is__scarlet-tulip-dress" title="Scarlet Tulip Dress"></i><i class="item-sprite is__astrograph-buckler" title="Astrograph Buckler"></i><i class="item-sprite is__glowing-silver-mirror-shield" title="Glowing Silver Mirror Shield"></i><i class="item-sprite is__sacred-ring-heavenly-lotus" title="Sacred Ring - Heavenly Lotus"></i><i class="item-sprite is__infernal-greaves" title="Infernal Greaves"></i><i class="item-sprite is__sky-soaring-gold-shoes" title="Sky Soaring Gold Shoes"></i><i class="item-sprite is__heavenly-wing-saint-shoes" title="Heavenly Wing Saint Shoes"></i><i class="item-sprite is__blood-ruby-heel" title="Blood Ruby Heel"></i><i class="item-sprite is__glowing-silver-mirror-boots" title="Glowing Silver Mirror Boots"></i><i class="item-sprite is__pride-of-the-roses" title="Pride of the Roses"></i><i class="item-sprite is__royal-guard-hat" title="Royal Guard Hat"></i><i class="item-sprite is__mourning-crown" title="Mourning Crown"></i><i class="item-sprite is__holy-prayers-crown" title="Holy Prayer's Crown"></i><i class="item-sprite is__prosperity-veil" title="Prosperity Veil"></i><i class="item-sprite is__heavenly-wing-wise-saint-hat" title="Heavenly Wing Wise Saint Hat"></i><i class="item-sprite is__millennium-earrings" title="Millennium Earrings"></i><i class="item-sprite is__fury-dragon-pendant" title="Fury Dragon Pendant"></i><i class="item-sprite is__war-gods-arm" title="War God's Arm"></i><i class="item-sprite is__flowering-fire-peony" title="Flowering Fire Peony"></i><i class="item-sprite is__scarlet-dragons-claw-fire-ring" title="Scarlet Dragon's Claw Fire Ring"></i><i class="item-sprite is__ruby-rose-choker" title="Ruby Rose Choker"></i><i class="item-sprite is__cardinal-clarion-brooch" title="Cardinal Clarion Brooch"></i><i class="item-sprite is__fairy-kings-guardian-stone" title="Fairy King's Guardian Stone"></i><i class="item-sprite is__mermaid-princess-spirit-tear" title="Mermaid Princess' Spirit Tear"></i><i class="item-sprite is__glorious-kings-shield-bangle" title="Glorious King's Shield Bangle"></i><i class="item-sprite is__sea-dragon-gods-hair-ornament" title="Sea Dragon God's Hair Ornament"></i><i class="item-sprite is__shield-god-ring-wall-breath" title="Shield God Ring - Wall Breath"></i><i class="item-sprite is__elfin-choker" title="Elfin Choker"></i><i class="item-sprite is__jade-harp-brooch" title="Jade Harp Brooch"></i><i class="item-sprite is__ocean-gods-earrings" title="Ocean God's Earrings"></i><i class="item-sprite is__divine-beasts-prayer" title="Divine Beast's Prayer"></i><i class="item-sprite is__sophos-bracelet" title="Sophos Bracelet"></i><i class="item-sprite is__little-ice-princess-knot" title="Little Ice Princess' Knot"></i><i class="item-sprite is__deep-crystallized-xenocrystal" title="Deep Crystallized Xenocrystal"></i><i class="item-sprite is__chaotic-choker" title="Chaotic Choker"></i><i class="item-sprite is__blue-night-nocturne-brooch" title="Blue Night Nocturne Brooch"></i></div><div class="red"><i class="item-sprite is__shining-sword-adamas" title="Shining Sword - Adamas"></i><i class="item-sprite is__choco-stick-blade" title="Choco Stick Blade"></i><i class="item-sprite is__blazing-red-sun-sword" title="Blazing Red Sun Sword"></i><i class="item-sprite is__crimson-jade-katana-scarlet-moon" title="Crimson Jade Katana - Scarlet Moon"></i><i class="item-sprite is__soft-ice-sherbet" title="Soft Ice Sherbet"></i><i class="item-sprite is__summer-breezes-blossom" title="Summer Breeze's Blossom"></i><i class="item-sprite is__jade-wind-blade-emerald-edge" title="Jade Wind Blade - Emerald Edge"></i><i class="item-sprite is__chocolate-banana-dagger" title="Chocolate Banana Dagger"></i><i class="item-sprite is__purple-mist-dagger" title="Purple Mist Dagger"></i><i class="item-sprite is__opal-sparge-fist" title="Opal Sparge Fist"></i><i class="item-sprite is__cream-puff-knuckle" title="Cream Puff Knuckle"></i><i class="item-sprite is__sand-dust-knuckle" title="Sand Dust Knuckle"></i><i class="item-sprite is__blue-god-bow-mercy-sapiros" title="Blue God Bow - Mercy Sapiros"></i><i class="item-sprite is__candy-sugar-bow" title="Candy Sugar Bow"></i><i class="item-sprite is__white-rain-bow" title="White Rain Bow"></i><i class="item-sprite is__crystallos-spike" title="Crystallos Spike"></i><i class="item-sprite is__chocolate-lance" title="Chocolate Lance"></i><i class="item-sprite is__lightning-spear" title="Lightning Spear"></i><i class="item-sprite is__brass-cleft-axe" title="Brass Cleft Axe"></i><i class="item-sprite is__crepe-axe" title="Crepe Axe"></i><i class="item-sprite is__polar-light-belt-axe" title="Polar Light Belt Axe"></i><i class="item-sprite is__dark-prison-staff-of-the-black-pearl" title="Dark Prison Staff of the Black Pearl"></i><i class="item-sprite is__lollipop-stick" title="Lollipop Stick"></i><i class="item-sprite is__dark-moon-arc-cane" title="Dark Moon Arc Cane"></i><i class="item-sprite is__heavenly-wand-of-the-white-pearl" title="Heavenly Wand of the White Pearl"></i><i class="item-sprite is__triple-ice-rod" title="Triple Ice Rod"></i><i class="item-sprite is__icy-snow-flower-cane" title="Icy Snow Flower Cane"></i><i class="item-sprite is__platinum-scale-armor" title="Platinum Scale Armor"></i><i class="item-sprite is__chocolate-mail" title="Chocolate Mail"></i><i class="item-sprite is__holy-engraved-armor-of-pure-gold" title="Holy Engraved Armor of Pure Gold"></i><i class="item-sprite is__rose-strawberry-armor" title="Rose Strawberry Armor"></i><i class="item-sprite is__pink-coral-dress" title="Pink Coral Dress"></i><i class="item-sprite is__fancy-macaron-dress" title="Fancy Macaron Dress"></i><i class="item-sprite is__black-agate-prayer-dress" title="Black Agate Prayer Dress"></i><i class="item-sprite is__magic-pancake-robe" title="Magic Pancake Robe"></i><i class="item-sprite is__iolite-shield" title="Iolite Shield"></i><i class="item-sprite is__chocolate-mint-ice-heels" title="Chocolate Mint Ice Heels"></i><i class="item-sprite is__moon-crystal-heels" title="Moon Crystal Heels"></i><i class="item-sprite is__sheet-tart-beret" title="Sheet Tart Beret"></i><i class="item-sprite is__godly-red-ring-ruby-rose" title="Godly Red Ring - Ruby Rose"></i><i class="item-sprite is__popcorn-necklace" title="Popcorn Necklace"></i><i class="item-sprite is__evergreen-green-ring" title="Evergreen Green Ring"></i><i class="item-sprite is__macaron-pendant" title="Macaron Pendant"></i><i class="item-sprite is__white-sacred-stone-diamond-star" title="White Sacred Stone - Diamond Star"></i><i class="item-sprite is__doughnut-choker" title="Doughnut Choker"></i></div><div class="misc"><i class="item-sprite is__yui-shard" title="Yui Shard"></i><i class="item-sprite is__rei-shard" title="Rei Shard"></i><i class="item-sprite is__yuki-shard" title="Yuki Shard"></i><i class="item-sprite is__kasumi-shard" title="Kasumi Shard"></i><i class="item-sprite is__mimi-shard" title="Mimi Shard"></i><i class="item-sprite is__kurumi-shard" title="Kurumi Shard"></i><i class="item-sprite is__eriko-shard" title="Eriko Shard"></i><i class="item-sprite is__saren-shard" title="Saren Shard"></i><i class="item-sprite is__ninon-shard" title="Ninon Shard"></i><i class="item-sprite is__shinobu-shard" title="Shinobu Shard"></i><i class="item-sprite is__akino-shard" title="Akino Shard"></i><i class="item-sprite is__mahiru-shard" title="Mahiru Shard"></i><i class="item-sprite is__kyouka-shard" title="Kyouka Shard"></i><i class="item-sprite is__tomo-shard" title="Tomo Shard"></i><i class="item-sprite is__shiori-shard" title="Shiori Shard"></i><i class="item-sprite is__aoi-shard" title="Aoi Shard"></i><i class="item-sprite is__ilya-shard" title="Ilya Shard"></i><i class="item-sprite is__jun-shard" title="Jun Shard"></i><i class="item-sprite is__mifuyu-shard" title="Mifuyu Shard"></i><i class="item-sprite is__shizuru-shard" title="Shizuru Shard"></i><i class="item-sprite is__misaki-shard" title="Misaki Shard"></i><i class="item-sprite is__rima-shard" title="Rima Shard"></i><i class="item-sprite is__ruka-shard" title="Ruka Shard"></i><i class="item-sprite is__djeeta-shard" title="Djeeta Shard"></i><i class="item-sprite is__pecorine-shard" title="Pecorine Shard"></i><i class="item-sprite is__kokkoro-shard" title="Kokkoro Shard"></i><i class="item-sprite is__arisa-shard" title="Arisa Shard"></i><i class="item-sprite is__kaya-shard" title="Kaya Shard"></i><i class="item-sprite is__anne-shard" title="Anne Shard"></i><i class="item-sprite is__grea-shard" title="Grea Shard"></i><i class="item-sprite is__oedo-kuuka-shard" title="Oedo Kuuka Shard"></i><i class="item-sprite is__oedo-ninon-shard" title="Oedo Ninon Shard"></i><i class="item-sprite is__transfer-student-aoi-shard" title="Transfer Student Aoi Shard"></i><i class="item-sprite is__chloe-shard" title="Chloe Shard"></i><i class="item-sprite is__chieru-shard" title="Chieru Shard"></i><i class="item-sprite is__yuni-shard" title="Yuni Shard"></i><i class="item-sprite is__halloween-mimi-shard" title="Halloween Mimi Shard"></i><i class="item-sprite is__luna-shard" title="Luna Shard"></i><i class="item-sprite is__christmas-ilya-shard" title="Christmas Ilya Shard"></i><i class="item-sprite is__magical-kasumi-shard" title="Magical Kasumi Shard"></i><i class="item-sprite is__ranger-rin-shard" title="Ranger Rin Shard"></i><i class="item-sprite is__ranger-mahiru-shard" title="Ranger Mahiru Shard"></i><i class="item-sprite is__wonder-rino-shard" title="Wonder Rino Shard"></i><i class="item-sprite is__hiyori-pure-shard" title="Hiyori Pure Shard"></i><i class="item-sprite is__yui-pure-shard" title="Yui Pure Shard"></i><i class="item-sprite is__rei-pure-shard" title="Rei Pure Shard"></i><i class="item-sprite is__akari-pure-shard" title="Akari Pure Shard"></i><i class="item-sprite is__maho-pure-shard" title="Maho Pure Shard"></i><i class="item-sprite is__rino-pure-shard" title="Rino Pure Shard"></i><i class="item-sprite is__hatsune-pure-shard" title="Hatsune Pure Shard"></i><i class="item-sprite is__suzuna-pure-shard" title="Suzuna Pure Shard"></i><i class="item-sprite is__io-pure-shard" title="Io Pure Shard"></i><i class="item-sprite is__yori-pure-shard" title="Yori Pure Shard"></i><i class="item-sprite is__ayane-pure-shard" title="Ayane Pure Shard"></i><i class="item-sprite is__saren-pure-shard" title="Saren Pure Shard"></i><i class="item-sprite is__ninon-pure-shard" title="Ninon Pure Shard"></i><i class="item-sprite is__akino-pure-shard" title="Akino Pure Shard"></i><i class="item-sprite is__mahiru-pure-shard" title="Mahiru Pure Shard"></i><i class="item-sprite is__yukari-pure-shard" title="Yukari Pure Shard"></i><i class="item-sprite is__tamaki-pure-shard" title="Tamaki Pure Shard"></i><i class="item-sprite is__mifuyu-pure-shard" title="Mifuyu Pure Shard"></i><i class="item-sprite is__shizuru-pure-shard" title="Shizuru Pure Shard"></i><i class="item-sprite is__rima-pure-shard" title="Rima Pure Shard"></i><i class="item-sprite is__pecorine-pure-shard" title="Pecorine Pure Shard"></i><i class="item-sprite is__kokkoro-pure-shard" title="Kokkoro Pure Shard"></i><i class="item-sprite is__kyaru-pure-shard" title="Kyaru Pure Shard"></i></div></div>
<div id="character-box" hidden=""><span class="unit-sprite us__akari"></span><span class="unit-sprite us__angel-akari"></span><span class="unit-sprite us__akino"></span><span class="unit-sprite us__christmas-akino"></span><span class="unit-sprite us__anna"></span><span class="unit-sprite us__summer-anna"></span><span class="unit-sprite us__anne"></span><span class="unit-sprite us__aoi"></span><span class="unit-sprite us__transfer-student-aoi"></span><span class="unit-sprite us__arisa"></span><span class="unit-sprite us__ayane"></span><span class="unit-sprite us__christmas-ayane"></span><span class="unit-sprite us__ayumi"></span><span class="unit-sprite us__wonder-ayumi"></span><span class="unit-sprite us__chieru"></span><span class="unit-sprite us__chika"></span><span class="unit-sprite us__christmas-chika"></span><span class="unit-sprite us__chloe"></span><span class="unit-sprite us__christina"></span><span class="unit-sprite us__christmas-christina"></span><span class="unit-sprite us__djeeta"></span><span class="unit-sprite us__emilia"></span><span class="unit-sprite us__eriko"></span><span class="unit-sprite us__valentine-eriko"></span><span class="unit-sprite us__grea"></span><span class="unit-sprite us__hatsune"></span><span class="unit-sprite us__summer-hatsune"></span><span class="unit-sprite us__hiyori"></span><span class="unit-sprite us__new-year-hiyori"></span><span class="unit-sprite us__princess-hiyori"></span><span class="unit-sprite us__ilya"></span><span class="unit-sprite us__christmas-ilya"></span><span class="unit-sprite us__inori"></span><span class="unit-sprite us__io"></span><span class="unit-sprite us__summer-io"></span><span class="unit-sprite us__jun"></span><span class="unit-sprite us__summer-jun"></span><span class="unit-sprite us__kaori"></span><span class="unit-sprite us__summer-kaori"></span><span class="unit-sprite us__kasumi"></span><span class="unit-sprite us__magical-kasumi"></span><span class="unit-sprite us__summer-kasumi"></span><span class="unit-sprite us__kaya"></span><span class="unit-sprite us__kokkoro"></span><span class="unit-sprite us__ceremonial-attire-kokkoro"></span><span class="unit-sprite us__new-year-kokkoro"></span><span class="unit-sprite us__princess-kokkoro"></span><span class="unit-sprite us__summer-kokkoro"></span><span class="unit-sprite us__kurumi"></span><span class="unit-sprite us__christmas-kurumi"></span><span class="unit-sprite us__kuuka"></span><span class="unit-sprite us__oedo-kuuka"></span><span class="unit-sprite us__kyaru"></span><span class="unit-sprite us__new-year-kyaru"></span><span class="unit-sprite us__princess-kyaru"></span><span class="unit-sprite us__summer-kyaru"></span><span class="unit-sprite us__kyouka"></span><span class="unit-sprite us__halloween-kyouka"></span><span class="unit-sprite us__labyrista"></span><span class="unit-sprite us__lou"></span><span class="unit-sprite us__luna"></span><span class="unit-sprite us__mahiru"></span><span class="unit-sprite us__ranger-mahiru"></span><span class="unit-sprite us__maho"></span><span class="unit-sprite us__summer-maho"></span><span class="unit-sprite us__makoto"></span><span class="unit-sprite us__summer-makoto"></span><span class="unit-sprite us__matsuri"></span><span class="unit-sprite us__halloween-matsuri"></span><span class="unit-sprite us__mifuyu"></span><span class="unit-sprite us__summer-mifuyu"></span><span class="unit-sprite us__mimi"></span><span class="unit-sprite us__halloween-mimi"></span><span class="unit-sprite us__deresute-mio"></span><span class="unit-sprite us__misaki"></span><span class="unit-sprite us__halloween-misaki"></span><span class="unit-sprite us__misato"></span><span class="unit-sprite us__summer-misato"></span><span class="unit-sprite us__misogi"></span><span class="unit-sprite us__halloween-misogi"></span><span class="unit-sprite us__mitsuki"></span><span class="unit-sprite us__miyako"></span><span class="unit-sprite us__halloween-miyako"></span><span class="unit-sprite us__monika"></span><span class="unit-sprite us__magical-monika"></span><span class="unit-sprite us__muimi"></span><span class="unit-sprite us__new-year-muimi"></span><span class="unit-sprite us__nanaka"></span><span class="unit-sprite us__summer-nanaka"></span><span class="unit-sprite us__neneka"></span><span class="unit-sprite us__new-year-neneka"></span><span class="unit-sprite us__ninon"></span><span class="unit-sprite us__oedo-ninon"></span><span class="unit-sprite us__nozomi"></span><span class="unit-sprite us__christmas-nozomi"></span><span class="unit-sprite us__pecorine"></span><span class="unit-sprite us__new-year-pecorine"></span><span class="unit-sprite us__princess-pecorine"></span><span class="unit-sprite us__summer-pecorine"></span><span class="unit-sprite us__ram"></span><span class="unit-sprite us__rei"></span><span class="unit-sprite us__halloween-rei"></span><span class="unit-sprite us__new-year-rei"></span><span class="unit-sprite us__rem"></span><span class="unit-sprite us__rima"></span><span class="unit-sprite us__cinderella-rima"></span><span class="unit-sprite us__rin"></span><span class="unit-sprite us__deresute-rin"></span><span class="unit-sprite us__ranger-rin"></span><span class="unit-sprite us__rino"></span><span class="unit-sprite us__wonder-rino"></span><span class="unit-sprite us__ruka"></span><span class="unit-sprite us__summer-ruka"></span><span class="unit-sprite us__saren"></span><span class="unit-sprite us__christmas-saren"></span><span class="unit-sprite us__summer-saren"></span><span class="unit-sprite us__sheffy"></span><span class="unit-sprite us__shinobu"></span><span class="unit-sprite us__halloween-shinobu"></span><span class="unit-sprite us__shiori"></span><span class="unit-sprite us__magical-shiori"></span><span class="unit-sprite us__shizuru"></span><span class="unit-sprite us__valentine-shizuru"></span><span class="unit-sprite us__suzume"></span><span class="unit-sprite us__new-year-suzume"></span><span class="unit-sprite us__summer-suzume"></span><span class="unit-sprite us__suzuna"></span><span class="unit-sprite us__summer-suzuna"></span><span class="unit-sprite us__tamaki"></span><span class="unit-sprite us__summer-tamaki"></span><span class="unit-sprite us__tomo"></span><span class="unit-sprite us__magical-tomo"></span><span class="unit-sprite us__tsumugi"></span><span class="unit-sprite us__halloween-tsumugi"></span><span class="unit-sprite us__deresute-uzuki"></span><span class="unit-sprite us__yori"></span><span class="unit-sprite us__angel-yori"></span><span class="unit-sprite us__yui"></span><span class="unit-sprite us__ceremonial-attire-yui"></span><span class="unit-sprite us__new-year-yui"></span><span class="unit-sprite us__princess-yui"></span><span class="unit-sprite us__yukari"></span><span class="unit-sprite us__christmas-yukari"></span><span class="unit-sprite us__yuki"></span><span class="unit-sprite us__yuni"></span></div>
<div id="recipe-data-div" class="notranslate" hidden=""></div>
<hr>




<script>
    let legacy_data, current_data, item_usage = {}, component_usage = {}, localstorage_data = null;
    const LOCALSTORAGE_KEY = "recipe-data_characters";
    function get_item_sprite_class(item_name) {
        return "is__" + item_name.replace("'", "").replace(/\W/g, '-').toLowerCase().replace('---', '-');
    }
    function get_item_image_path(file_name = "") {
        file_name = file_name.split(' ').join('_');
        return "../../images/items" + ($("html").hasClass("webp") ? "_webp/" + file_name + ".webp" : "/" + file_name + ".png");
    }
    function get_unit_sprite_class(unit_id) {
        return "us__" + unit_id.replace(/_/g, '-').toLowerCase().replace('---', '-');
    }
    function toggle_catalog() {
        const catalog = document.getElementById("catalog"),
              data = document.getElementById("recipe-data-div"),
              back = document.getElementById("back"),
              character_box = document.getElementById("character-box-button");
        catalog.hidden = character_box.hidden = !catalog.hidden;
        data.hidden = back.hidden = !data.hidden;
        if (data.hidden) {
            $(window).off();
        }
        window.scrollTo(0, 0);
    }
    function toggle_character_box() {
        const catalog = document.getElementById("catalog"),
              character_box = document.getElementById("character-box");
        catalog.hidden = !catalog.hidden;
        character_box.hidden = !character_box.hidden;

    }
    window.onload = function ()
    {
        equipment_data.read_data(function (success) {
            if (success) {
                current_data = equipment_data.data();
                equipment_data.set_loaded_version(equipment_data.version.LEGACY);
                equipment_data.read_data(function (success) {
                    if (success) {
                        legacy_data = equipment_data.data();
                        character_data.read_data(function (success) {
                            if (success)
                                build_catalog();
                            else
                                document.getElementById("catalog").innerHTML = "failed to read character data";
                        });
                    }
                    else
                        document.getElementById("catalog").innerHTML = "failed to read equipment data (legacy)";
                });
            }
            else
                document.getElementById("catalog").innerHTML = "failed to read equipment data (current)";
        });

        function build_catalog() {
            // BUILD CATALOG
            const catalog = document.getElementById("catalog"),
                  character_box = document.getElementById("character-box");
            let misc_items = document.createElement("div"),
                item_div = document.createElement("div"),
                current_rarity = equipment_data.rarity.COMMON;
            item_div.classList.add(current_rarity);
            misc_items.classList.add(equipment_data.rarity.MISC);
            for (const item_name in current_data) {
                let item = document.createElement("i");
                item.classList.add("item-sprite", get_item_sprite_class(item_name));
                item.title = item_name;
                item.onclick = function () {
                    document.getElementById("catalog").hidden = true;
                    document.getElementById("character-box-button").hidden = true;
                    document.getElementById("recipe-data-div").hidden = document.getElementById("back").hidden = false;
                    build_data(item_name);
                    window.scrollTo(0, 0);
                };

                const item_rarity = current_data[item_name]["rarity"];
                if (item_rarity === equipment_data.rarity.MISC) {
                    misc_items.appendChild(item);
                    continue;
                }

                if (item_rarity !== current_rarity) {
                    catalog.appendChild(item_div);
                    item_div = document.createElement("div");
                    current_rarity = item_rarity;
                    item_div.classList.add(current_rarity);
                }

                item_div.appendChild(item);

                // BUILD COMPONENT USAGE DATA
                for (const comp_name of current_data[item_name]["req_items"]) {
                    if (component_usage.hasOwnProperty(comp_name)) {
                        component_usage[comp_name].push(item_name);
                    }
                    else {
                        component_usage[comp_name] = [ item_name ];
                    }
                }
            }

            catalog.appendChild(item_div);
            catalog.appendChild(misc_items);

            // IF LOCALSTORAGE SUPPORT IS AVAILABLE...
            if (typeof(Storage) !== "undefined") {
                // REVEAL CHARACTER BOX BUTTON
                document.getElementById("character-box-button").hidden = false;
                localstorage_data = localStorage.getItem(LOCALSTORAGE_KEY);
                if (localstorage_data !== null) {
                    localstorage_data = JSON.parse(localstorage_data);
                }
                else {
                    localstorage_data = [];
                }
            }

            // BUILD ITEM USAGE / CHARACTER BOX
            const char_data = character_data.data();
            for (const unit_id in char_data) {
                // ADD CHARACTER TO CHARACTER BOX
                const elem = document.createElement("span");
                elem.classList.add("unit-sprite", get_unit_sprite_class(unit_id));
                if (localstorage_data.includes(unit_id)) {
                    elem.classList.add("enabled");
                }
                elem.onclick = (mouseEvent) => {
                    const enabled = mouseEvent.srcElement.classList.toggle("enabled");
                    if (typeof(Storage) !== "undefined") {
                        if (enabled) {
                            localstorage_data.push(unit_id);
                            localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(localstorage_data));
                        }
                        else {
                            if (localstorage_data.includes(unit_id)) {
                                const index = localstorage_data.indexOf(unit_id);
                                if (index > -1) {
                                    localstorage_data.splice(index, 1);
                                }
                            }
                            if (localstorage_data.length === 0) {
                                localStorage.removeItem(LOCALSTORAGE_KEY);
                            }
                            else {
                                localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(localstorage_data));
                            }
                        }
                    }
                }
                character_box.appendChild(elem);

                // BUILD ITEM USAGE
                for (let i = 1, j = character_data.max_rank() ; i <= j ; i++) {
                    const rank_array = char_data[unit_id]["rank_" + i];
                    for (const item_name of rank_array) {
                        const unit_string = unit_id + "." + i;
                        if (item_usage.hasOwnProperty(item_name)) {
                            if (!item_usage[item_name].includes(unit_string))
                                item_usage[item_name].push(unit_string);
                        }
                        else {
                            item_usage[item_name] = [ unit_string ];
                        }
                    }
                }
            }
        }

        function build_data(item_name) {
            const item = document.createElement("div"),
                  data_div = document.getElementById("recipe-data-div");
            let is_exists_in_legacy = legacy_data.hasOwnProperty(item_name);
            data_div.innerHTML = "";

            // ITEM NAME
            let name_div = document.createElement("div"),
                name_en = document.createElement("span"),
                name_jp = document.createElement("span");
            name_div.classList.add("names");
            name_en.innerText = item_name;
            name_en.classList.add("name_en");
            name_jp.innerText = current_data[item_name]["name_jp"];
            name_jp.classList.add("name_jp");
            name_div.appendChild(name_en);
            name_div.appendChild(name_jp);
            item.appendChild(name_div);

            // ITEM IMAGE
            let images = document.createElement("div");
            images.classList.add("images");
            let equip_img = document.createElement("img");
            equip_img.classList.add("equip_img");
            equip_img.title = item_name;
            equip_img.src = get_item_image_path(item_name);
            images.appendChild(equip_img);
            if (current_data[item_name]["has_fragments"]) {
                let frag_img = document.createElement("img");
                frag_img.classList.add("frag_img");
                frag_img.title = item_name + " Fragment";
                frag_img.src = get_item_image_path(item_name + " Fragment");
                images.appendChild(frag_img);
            }
            item.appendChild(images);


            // CURRENT/LEGACY RECIPES
            let current = document.createElement("div");
            current.classList.add("current");
            if (is_exists_in_legacy) {
                let current_span = document.createElement("span");
                current_span.classList.add("title");
                current_span.innerText = "Current Recipe";
                current.appendChild(current_span);
            }
            let current_recipe_div = document.createElement("div");
            current_recipe_div.id = "current_recipe";
            current.appendChild(current_recipe_div);
            current.appendChild(get_recipe_elem(item_name, current_data));
            item.appendChild(current);

            if (is_exists_in_legacy) {
                let legacy = document.createElement("div");
                legacy.classList.add("legacy");
                let legacy_span = document.createElement("span");
                legacy_span.classList.add("title");
                legacy_span.innerText = "Legacy Recipe";
                legacy.appendChild(legacy_span);
                let legacy_recipe_div = document.createElement("div");
                legacy_recipe_div.id = "legacy_recipe";
                legacy.appendChild(legacy_recipe_div);
                legacy.appendChild(get_recipe_elem(item_name, legacy_data));

                if (current.querySelector(".recipe_result").innerHTML === legacy.querySelector(".recipe_result").innerHTML) {
                    // IF BOTH RECIPES ARE THE SAME, NO NEED TO DISPLAY THE LEGACY RECIPE.
                    // DELETE THE "Current Recipe" TITLE TOO
                    is_exists_in_legacy = false;
                    current.removeChild(current.querySelector("span.title"));
                }
                else {
                    item.appendChild(legacy);
                }
            }

            // COMPONENT USAGE
            const comp_usage = component_usage[item_name],
                  comp_usage_elem = document.createElement("div");
            if (typeof comp_usage !== "undefined") {
                comp_usage_elem.classList.add("comp-usage");
                const comp_usage_title = document.createElement("span");
                comp_usage_title.classList.add("title");
                comp_usage_title.innerText = "Equipment Usage";
                comp_usage_elem.appendChild(comp_usage_title);
                for (const parent_item of comp_usage) {
                    const elem = document.createElement("i");
                    elem.classList.add("item-sprite", get_item_sprite_class(parent_item));
                    elem.title = parent_item;
                    elem.onclick = function() {
                        build_data(parent_item);
                    };
                    comp_usage_elem.appendChild(elem);
                }
                item.appendChild(comp_usage_elem);
            }

            // CHARACTER USAGE
            const usage = item_usage[item_name],
                  usage_elem = document.createElement("div");
            if (typeof usage !== "undefined") {
                usage_elem.classList.add("usage");
                const usage_title = document.createElement("span");
                usage_title.classList.add("title");
                usage_title.innerText = "Character Usage";
                usage_elem.appendChild(usage_title);
                let disabled_characters = [];
                for (const usage_string of usage) {
                    const u = usage_string.split('.'),
                        elem = document.createElement("span");
                    elem.classList.add("unit-sprite", get_unit_sprite_class(u[0]), "rank-" + u[1]);
                    elem.innerText = u[1];
                    // IF CHARACTER BOX DATA DOESN'T EXIST...
                    if (localstorage_data.length === 0) {
                        // CREATE AND ADD ELEMENT AS NORMAL
                        usage_elem.appendChild(elem);
                    }
                    else {
                        // CHARACTER BOX DATA EXISTS, ADD UNITS THAT THE USER HAS FIRST
                        if (localstorage_data.includes(u[0])) {
                            usage_elem.appendChild(elem);
                        }
                        else {
                            // USER DOES NOT HAVE THIS UNIT, DISABLE IT AND ADD IT LATER
                            elem.classList.add("disabled");
                            disabled_characters.push(elem);
                        }
                    }
                }

                // ADD DISABLED CHARACTERS IF APPLICABLE
                if (disabled_characters.length > 0) {
                    for (const elem of disabled_characters) {
                        usage_elem.appendChild(elem);
                    }
                }

                item.appendChild(usage_elem);
            }

            data_div.appendChild(item);

            let current_config = build_treant(item_name, current_data, "current_recipe");
            let legacy_config;
            if (is_exists_in_legacy) {
                legacy_config = build_treant(item_name, legacy_data, "legacy_recipe");
                // REBUILD CURRENT RECIPE Treant BECAUSE AFTER LEGACY RECIPE IS ADDED IT WILL BE MISPOSITIONED
                new Treant(current_config);
            }

            const waitForFinal = (function () {
                let timers = {};
                return function (callback, ms, uniqueID) {
                    if (!uniqueID) {
                        uniqueID = "Don't call this twice without an uniqueID";
                    }
                    if (timers[uniqueID]) {
                        clearTimeout(timers[uniqueID]);
                    }
                    timers[uniqueID] = setTimeout(callback, ms);
                }
            })();
            $(window).on("resize", function () {
                waitForFinal(function () {
                    new Treant(current_config);
                    if (is_exists_in_legacy) {
                        new Treant(legacy_config);
                    }
                }, 500, "treant-resize");
            });

            function get_recipe_elem(item_name, data) {
                let recipe_elem = document.createElement("div");
                recipe_elem.classList.add("recipe_result");
                const recipe = get_recipe(item_name, data);
                for (const frag_name in recipe) {
                    let frag = document.createElement("div");
                    frag.title = frag_name;
                    frag.classList.add("item-sprite", get_item_sprite_class(frag_name));
                    let amt = document.createElement("span");
                    amt.innerText = recipe[frag_name];
                    frag.appendChild(amt);
                    recipe_elem.appendChild(frag);
                }
                return recipe_elem;

                function get_recipe(item_name, data) {
                    const item_data = data[item_name];
                    let recipe = {};
                    if (item_data["req_pieces"] > 0) {
                        recipe[item_data["name"] + (item_data["has_fragments"] ? " Fragment" : "")] = item_data["req_pieces"];
                    }

                    // ADD REQUIRED ITEM RECIPES
                    const required_items = item_data["req_items"];
                    for (let i = 0, j = required_items.length ; i < j ; i++) {
                        recipe = merge_recipes(recipe, get_recipe(required_items[i], data));
                    }

                    return recipe;

                    function merge_recipes(...recipes) {
                        return recipes.reduce((a, b) => {
                            for (let f in b) {
                                if (b.hasOwnProperty(f)) {
                                    a[f] = (a[f] || 0) + b[f];
                                }
                            }
                            return a;
                        }, {});
                    }
                }
            }


            function build_treant(item_name, data, element_id) {
                let config = {
                    chart: {
                        container: "#" + element_id,
                        rootOrientation: "NORTH",
                        connectors: {
                            type: "step",
                            style: {
                                "stroke-width": 3
                            }
                        }
                    },
                    nodeStructure: {
                        HTMLclass: "",
                        children: []
                    }
                };
                const item_data = data[item_name];
                let frag_name = item_data["name"] + (item_data["has_fragments"] ? " Fragment" : ""),
                    frag_amount = item_data["req_pieces"];
                config["nodeStructure"]["HTMLclass"] = "item-sprite " + get_item_sprite_class(item_name);
                if (frag_amount > 0) {
                    config["nodeStructure"]["children"] = [
                        {
                            HTMLclass: "item-sprite " + get_item_sprite_class(frag_name),
                            text: {
                                desc: frag_amount
                            }
                        }
                    ];
                }
                else {
                    config["nodeStructure"]["children"] = [];
                }

                // ADD REQUIRED ITEM RECIPES
                const required_items = item_data["req_items"];
                for (let i = 0, j = required_items.length ; i < j ; i++) {
                    config["nodeStructure"]["children"].push(get_req_item(required_items[i]));
                }

                function get_req_item(item_name) {
                    let obj = {},
                        name = data[item_name]["name"] + (data[item_name]["has_fragments"] ? " Fragment" : ""),
                        amount = data[item_name]["req_pieces"];
                    obj["HTMLclass"] = "item-sprite " + get_item_sprite_class(item_name);
                    if (amount > 0) {
                        obj["children"] = [
                            {
                                HTMLclass: "item-sprite " + get_item_sprite_class(name),
                                text: {
                                    desc: amount
                                }
                            }];
                    }
                    else {
                        obj["children"] = [];
                    }

                    let req = data[item_name]["req_items"];
                    for (let i = 0, j = req.length ; i < j ; i++) {
                        obj["children"].push(get_req_item(req[i]));
                    }
                    return obj;
                }
                new Treant(config);
                return config;
            }
        }
    };
</script>
</body></html>
